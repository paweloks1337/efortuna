<!DOCTYPE html>
<html lang="pl">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Mistrzostwa Typowania 2025</title>
<style>
body { 
    font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; 
    background: #111; 
    color: #FFD700; 
    text-align: center; 
    margin: 0; 
    padding: 0;
}

/* Nag贸wek */
h1 {
    margin-top: 30px;
    font-size: 2.5em;
    color: #FFD700;
    text-shadow: 1px 1px 5px #000;
}

/* Podtytu */
p {
    font-size: 1.2em;
    color: #fff;
}

/* Tabela */
table { 
    margin: 30px auto; 
    border-collapse: collapse; 
    width: 90%; 
    max-width: 700px; 
    background: #222; 
    border-radius: 15px; 
    overflow: hidden; 
    box-shadow: 0 5px 20px rgba(0,0,0,0.5);
}

/* Nag贸wek tabeli */
th, td { 
    padding: 15px; 
    border-bottom: 1px solid #333; 
}

th { 
    background: #FFD700; 
    color: #111; 
    text-transform: uppercase; 
    font-weight: bold; 
    letter-spacing: 0.05em;
}

/* Wiersze tabeli */
tr:nth-child(even) { background: #1a1a1a; }
tr:nth-child(odd) { background: #222; }

/* Hover */
tr:hover { background: #333; transition: 0.3s; }

/* Kom贸rki */
td { color: #FFD700; font-weight: 600; }

/* Responsywno */
@media (max-width: 600px) {
    th, td { padding: 10px; font-size: 0.9em; }
    h1 { font-size: 2em; }
    p { font-size: 1em; }
}
</style>
</head>
<body>

<h1> Mistrzostwa Typowania 2025</h1>
<p>Ranking najlepszych typer贸w</p>

<table id="ranking">
<thead>
<tr>
<th>Miejsce</th>
<th>Nick</th>
<th>Kupony</th>
<th>Punkty</th>
</tr>
</thead>
<tbody></tbody>
</table>

<script>
const sheetUrl = "https://docs.google.com/spreadsheets/d/e/2PACX-1vTThQFcv-8JkvXEePVWkQw7yoEJX9XcZDFCChCWL_JmzgLQItyNW5qmp2eUKxD6a5Wp--sfWzFes_Cj/pub?output=csv";

async function loadRanking() {
    const res = await fetch(sheetUrl);
    const text = await res.text();
    const rows = text.trim().split("\n").slice(1);
    const players = {};

    rows.forEach(row => {
        const cols = row.split(",");
        const nick = cols[0].trim();
        const punkty = parseInt(cols[1]) || 0;

        if (!players[nick]) {
            players[nick] = { kupony: 0, punkty: 0 };
        }

        players[nick].kupony += 1;
        players[nick].punkty += punkty;
    });

    const ranking = Object.keys(players).map(nick => ({
        nick,
        kupony: players[nick].kupony,
        punkty: players[nick].punkty
    })).sort((a,b) => b.punkty - a.punkty);

    const tbody = document.querySelector("#ranking tbody");
    tbody.innerHTML = "";

    ranking.forEach((row, i) => {
        const tr = document.createElement("tr");
        tr.innerHTML = `<td>${i+1}</td><td>${row.nick}</td><td>${row.kupony}</td><td data-punkty="${row.punkty}">0</td>`;
        tbody.appendChild(tr);
    });

    // Animacja liczb punkt贸w
    animatePoints();
}

// Funkcja animujca punkty
function animatePoints() {
    const cells = document.querySelectorAll("td[data-punkty]");
    cells.forEach(cell => {
        const target = parseInt(cell.getAttribute("data-punkty"));
        let count = 0;
        const step = Math.ceil(target / 50); // 50 krok贸w animacji
        const interval = setInterval(() => {
            count += step;
            if(count >= target) {
                cell.textContent = target;
                clearInterval(interval);
            } else {
                cell.textContent = count;
            }
        }, 20);
    });
}

loadRanking();
</script>
</body>
</html>
